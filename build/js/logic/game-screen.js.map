{"version":3,"file":"game-screen.js","sources":["../util.js","../views/abstract-view.js","../constants.js","../views/header-view.js","../views/footer-view.js","../views/greeting-view.js","../views/rules-view.js","initial-game.js","game-model.js","../splash/splash-screen.js","../loader.js","../views/statistic-view.js","game-statistic.js","../views/game-results-view.js","../views/many-results-view.js","../application.js","../views/game-first-view.js","../views/game-second-view.js","../views/game-third-view.js","../views/modal-view.js","game-screen.js"],"sourcesContent":["export const getElementFromTemplate = (markup) => {\n  let domElement = document.createElement(`div`);\n  domElement.innerHTML = markup;\n  return domElement;\n};\n\nexport const showErrorMessage = (message) => {\n  const template = document.createElement(`div`);\n  template.textContent = message;\n\n  const styles = [\n    `position: fixed`,\n    `top: 25%`,\n    `left: 50%`,\n    `z-index: 100`,\n    `width: 800px`,\n    `padding: 20px`,\n    `color: #fff`,\n    `text-align: center`,\n    `transform: translate(-50%, -50%)`,\n    `border-radius: 2px`,\n    `background-color: #DC143C`\n  ];\n\n  template.style.cssText = styles.join(`;`);\n  document.body.appendChild(template);\n};\n","import {getElementFromTemplate} from \"../util\";\n\nclass AbstractView {\n  constructor() {\n    if (new.target === AbstractView) {\n      throw new Error(`Can not create example of AbstractView, only the new one class`);\n    }\n  }\n\n  get template() {\n    throw new Error(`Template is required`);\n  }\n\n  get element() {\n    if (this._element) {\n      return this._element;\n    }\n    this._element = this.render();\n    this.bind(this._element);\n    return this._element;\n  }\n\n  render() {\n    return getElementFromTemplate(this.template);\n  }\n\n  bind() {\n  }\n}\n\nexport default AbstractView;\n","const constants = {\n  MAX_ANSWERS_COUNT: 10,\n  MAX_WRONG_ANSWERS: 3,\n  CORRECT_ANSWER: 100,\n  ADDITIONAL_POINTS: 50,\n  LOWER_TIME_LIMIT: 10,\n  HIGHER_TIME_LIMIT: 20,\n  CHECKED_RADIO_COUNT: 2,\n  MIN_NAME_LENGTH: 2,\n  INITIAL_STATE: Object.freeze({\n    lives: 3,\n    time: 30,\n    win: false,\n    level: 0\n  }),\n  SERVER_URL: `https://es.dump.academy/pixel-hunter`,\n  MAX_RESULTS_NUMBER: 3,\n  LAST_SEC: 5,\n  PAUSE_TIME: 3000\n};\n\nexport default constants;\n","import AbstractView from \"./abstract-view\";\nimport constants from \"../constants\";\n\nclass HeaderView extends AbstractView {\n  constructor(state) {\n    super();\n    this.state = state;\n  }\n\n\n  get template() {\n    return `\n    <header class=\"header\">\n      <div class=\"header__back\">\n        <button class=\"back\">\n          <img src=\"img/arrow_left.svg\" width=\"45\" height=\"45\" alt=\"Back\">\n          <img src=\"img/logo_small.svg\" width=\"101\" height=\"44\">\n        </button>\n      </div>\n      <h1 class=\"game__timer\">${this.state.time}</h1>\n      <div class=\"game__lives\">\n        ${new Array(constants.INITIAL_STATE.lives - this.state.lives)\n      .fill(`<img src=\"img/heart__empty.svg\" class=\"game__heart\" alt=\"Life\" width=\"32\" height=\"32\">`)\n      .join(``)}\n        ${new Array(this.state.lives)\n      .fill(`<img src=\"img/heart__full.svg\" class=\"game__heart\" alt=\"Life\" width=\"32\" height=\"32\">`)\n      .join(``)}\n      </div>\n    </header>`;\n  }\n\n  bind() {\n    this.element.querySelector(`.back`).addEventListener(`click`, () => {\n      this.onButtonClick();\n      this.stopFlashing();\n    });\n\n    if (this.state.time <= constants.LAST_SEC) {\n      this.element.querySelector(`.game__timer`).classList.add(`flashing`);\n    }\n  }\n\n  onButtonClick() {\n  }\n\n  stopFlashing() {\n    this.element.querySelector(`.game__timer`).classList.remove(`flashing`);\n  }\n}\n\nexport default HeaderView;\n","import AbstractView from \"./abstract-view\";\n\nclass FooterView extends AbstractView {\n  constructor() {\n    super();\n  }\n\n  get template() {\n    return `\n    <footer class=\"footer\">\n      <a href=\"https://htmlacademy.ru\" class=\"social-link social-link--academy\">HTML Academy</a>\n      <span class=\"footer__made-in\">–°–¥–µ–ª–∞–Ω–æ –≤ <a href=\"https://htmlacademy.ru\" class=\"footer__link\">HTML Academy</a> &copy; 2016</span>\n      <div class=\"footer__social-links\">\n        <a href=\"https://twitter.com/htmlacademy_ru\" class=\"social-link  social-link--tw\">–¢–≤–∏—Ç—Ç–µ—Ä</a>\n        <a href=\"https://www.instagram.com/htmlacademy/\" class=\"social-link  social-link--ins\">–ò–Ω—Å—Ç–∞–≥—Ä–∞–º</a>\n        <a href=\"https://www.facebook.com/htmlacademy\" class=\"social-link  social-link--fb\">–§—ç–π—Å–±—É–∫</a>\n        <a href=\"https://vk.com/htmlacademy\" class=\"social-link  social-link--vk\">–í–∫–æ–Ω—Ç–∞–∫—Ç–µ</a>\n      </div>\n    </footer>`;\n  }\n}\n\n\nexport default FooterView;\n","import AbstractView from \"./abstract-view\";\nimport Application from \"../application\";\nimport FooterView from \"./footer-view\";\n\nclass GreetingView extends AbstractView {\n  constructor() {\n    super();\n  }\n\n  get template() {\n    return `\n    <div class=\"greeting central--blur\">\n      <div class=\"greeting__logo\"><img src=\"img/logo_big.png\" width=\"201\" height=\"89\" alt=\"Pixel Hunter\"></div>\n      <h1 class=\"greeting__asterisk\">*</h1>\n      <div class=\"greeting__challenge\">\n        <h3>–õ—É—á—à–∏–µ —Ö—É–¥–æ–∂–Ω–∏–∫–∏-—Ñ–æ—Ç–æ—Ä–µ–∞–ª–∏—Å—Ç—ã –±—Ä–æ—Å–∞—é—Ç&nbsp;—Ç–µ–±–µ&nbsp;–≤—ã–∑–æ–≤!</h3>\n        <p>–ü—Ä–∞–≤–∏–ª–∞ –∏–≥—Ä—ã –ø—Ä–æ—Å—Ç—ã.<br>\n          –ù—É–∂–Ω–æ –æ—Ç–ª–∏—á–∏—Ç—å —Ä–∏—Å—É–Ω–æ–∫&nbsp;–æ—Ç —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–∏ –∏ —Å–¥–µ–ª–∞—Ç—å –≤—ã–±–æ—Ä.<br>\n          –ó–∞–¥–∞—á–∞ –∫–∞–∂–µ—Ç—Å—è —Ç—Ä–∏–≤–∏–∞–ª—å–Ω–æ–π, –Ω–æ –Ω–µ –¥—É–º–∞–π, —á—Ç–æ –≤—Å–µ —Ç–∞–∫ –ø—Ä–æ—Å—Ç–æ.<br>\n          –§–æ—Ç–æ—Ä–µ–∞–ª–∏–∑–º –æ–±–º–∞–Ω—á–∏–≤ –∏ –∫–æ–≤–∞—Ä–µ–Ω.<br>\n          –ü–æ–º–Ω–∏, –≥–ª–∞–≤–Ω–æ–µ ‚Äî —Å–º–æ—Ç—Ä–µ—Ç—å –æ—á–µ–Ω—å –≤–Ω–∏–º–∞—Ç–µ–ª—å–Ω–æ.</p>\n      </div>\n      <div class=\"greeting__continue\"><span><img src=\"img/arrow_right.svg\" width=\"64\" height=\"64\" alt=\"Next\"></span></div>\n    </div>\n    ${new FooterView().template}`;\n  }\n\n  bind() {\n    const continueButton = this.element.querySelector(`.greeting__continue`);\n    continueButton.onclick = () => {\n      Application.showRules();\n    };\n  }\n\n  hide() {\n    this.element.children[0].style.opacity = `0`;\n  }\n\n  fadeIn() {\n    this.element.children[1].style.opacity = `1`;\n    this.element.children[1].classList.add(`fade--in`);\n  }\n\n  addElement(element) {\n    this.element.insertAdjacentElement(`afterbegin`, element);\n    this.element.children[0].style = `position: absolute; top: 0;`;\n  }\n\n  removeElement(element) {\n    element.remove();\n  }\n}\n\nexport default GreetingView;\n","import AbstractView from \"./abstract-view\";\nimport constants from \"../constants\";\nimport Application from \"../application\";\nimport FooterView from \"./footer-view\";\n\nclass RulesView extends AbstractView {\n  constructor() {\n    super();\n  }\n\n  get template() {\n    return `\n    <header class=\"header\">\n      <div class=\"header__back\">\n        <button class=\"back\">\n          <img src=\"img/arrow_left.svg\" width=\"45\" height=\"45\" alt=\"Back\">\n          <img src=\"img/logo_small.svg\" width=\"101\" height=\"44\">\n        </button>\n      </div>\n    </header>\n    <div class=\"rules\">\n      <h1 class=\"rules__title\">–ü—Ä–∞–≤–∏–ª–∞</h1>\n      <p class=\"rules__description\">–£–≥–∞–¥–∞–π 10 —Ä–∞–∑ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è —Ñ–æ—Ç–æ <img\n        src=\"img/photo_icon.png\" width=\"16\" height=\"16\"> –∏–ª–∏ —Ä–∏—Å—É–Ω–æ–∫ <img\n        src=\"img/paint_icon.png\" width=\"16\" height=\"16\" alt=\"\">.<br>\n        –§–æ—Ç–æ–≥—Ä–∞—Ñ–∏—è–º–∏ –∏–ª–∏ —Ä–∏—Å—É–Ω–∫–∞–º–∏ –º–æ–≥—É—Ç –±—ã—Ç—å –æ–±–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è.<br>\n        –ù–∞ –∫–∞–∂–¥—É—é –ø–æ–ø—ã—Ç–∫—É –æ—Ç–≤–æ–¥–∏—Ç—Å—è 30 —Å–µ–∫—É–Ω–¥.<br>\n        –û—à–∏–±–∏—Ç—å—Å—è –º–æ–∂–Ω–æ –Ω–µ –±–æ–ª–µ–µ 3 —Ä–∞–∑.<br>\n        <br>\n        –ì–æ—Ç–æ–≤—ã?\n      </p>\n      <form class=\"rules__form\">\n        <input class=\"rules__input\" type=\"text\" placeholder=\"–í–∞—à–µ –ò–º—è\">\n        <button class=\"rules__button  continue\" type=\"submit\" disabled>Go!</button>\n      </form>\n    </div>\n    ${new FooterView().template}`;\n  }\n\n  bind() {\n    const input = this.element.querySelector(`.rules__input`);\n    const button = this.element.querySelector(`.rules__button`);\n    const backButton = this.element.querySelector(`.back`);\n    const form = this.element.querySelector(`.rules__form`);\n    // –∏–º—è –Ω–µ –º–æ–∂–µ—Ç —Å–æ—Å—Ç–æ—è—Ç—å < —á–µ–º –∏–∑ –¥–≤—É—Ö —Å–∏–º–≤–æ–ª–æ–≤\n    input.oninput = () => {\n      button.disabled = input.value.length < constants.MIN_NAME_LENGTH;\n    };\n\n    button.addEventListener(`click`, (evt) => {\n      evt.preventDefault();\n      Application.showGame(input.value);\n      form.reset();\n    });\n\n    backButton.addEventListener(`click`, () => {\n      Application.showGreeting();\n    });\n  }\n}\n\nexport default RulesView;\n","const initialGame = {\n  lives: 3,\n  time: 30,\n  win: false,\n  level: 0\n};\n\nexport default initialGame;\n","import initialGame from \"./initial-game\";\nimport constants from \"../constants\";\n\nclass GameModel {\n  constructor(data, player) {\n    this.data = data;\n    this.player = player;\n    this.restart();\n  }\n\n  get state() {\n    return this._state;\n  }\n\n  getLevel(index) {\n    return this.data[index];\n  }\n\n  getCurrentLevel() {\n    return this.getLevel(this._state.level);\n  }\n\n  hasNextLevel() {\n    return this.getLevel(this._state.level + 1) !== void 0;\n  }\n\n  nextLevel() {\n    this._state.level++;\n  }\n\n  die() {\n    this._state.lives--;\n  }\n\n  isDead() {\n    return this._state.lives <= 0;\n  }\n\n  win() {\n    this._state.win = true;\n  }\n\n  tick() {\n    this._state.time--;\n  }\n\n  addAnswer(answer) {\n    this._state.answers.push({correct: answer, time: initialGame.time - this._state.time});\n  }\n\n  restart() {\n    this._state = Object.assign({}, constants.INITIAL_STATE);\n    this._state.answers = [];\n  }\n\n  rebootTime() {\n    this._state.time = initialGame.time;\n  }\n}\n\nexport default GameModel;\n","import AbstractView from \"../views/abstract-view\";\n\nclass SplashScreen extends AbstractView {\n  constructor() {\n    super();\n  }\n\n  get template() {\n    return `\n    <div id=\"main\" class=\"central__content\">\n      <div id=\"intro\" class=\"intro\">\n        <h1 class=\"intro__asterisk load\">*</h1>\n        <p class=\"intro__motto\"><sup>*</sup> –≠—Ç–æ –Ω–µ —Ñ–æ—Ç–æ. –≠—Ç–æ —Ä–∏—Å—É–Ω–æ–∫ –º–∞—Å–ª–æ–º –Ω–∏–¥–µ—Ä–ª–∞–Ω–¥—Å–∫–æ–≥–æ —Ö—É–¥–æ–∂–Ω–∏–∫–∞-—Ñ–æ—Ç–æ—Ä–µ–∞–ª–∏—Å—Ç–∞ Tjalf Sparnaay.</p>\n      </div>\n    </div>`;\n  }\n\n  fadeOut() {\n    this.element.classList.add(`fade--out`);\n  }\n}\n\nexport default SplashScreen;\n","import constants from \"./constants\";\n\nconst DEFAULT_NAME = `–ù–µ–æ–ø–æ–∑–Ω–∞–Ω–Ω—ã–π –≤–æ–º–±–∞—Ç`;\nconst APP_ID = 13111983;\n\nconst checkStatus = (response) => {\n  if (response.ok) {\n    return response;\n  } else {\n    throw new Error(`${response.status}: ${response.statusText}`);\n  }\n};\n\nconst toJSON = (response) => response.json();\n\nexport default class Loader {\n  static async loadData() {\n    const response = await fetch(`${constants.SERVER_URL}/questions`);\n    checkStatus(response);\n    return await toJSON(response);\n  }\n\n  static async loadResults(name = DEFAULT_NAME) {\n    const response = await fetch(`${constants.SERVER_URL}/stats/${APP_ID}-${name}`);\n    checkStatus(response);\n    return await toJSON(response);\n  }\n\n  static async saveResults(data, name = DEFAULT_NAME) {\n    const requestSettings = {\n      body: JSON.stringify(data),\n      headers: {\n        'Content-Type': `application/json`\n      },\n      method: `POST`\n    };\n    const response = await fetch(`${constants.SERVER_URL}/stats/${APP_ID}-${name}`, requestSettings);\n    return checkStatus(response);\n  }\n}\n\n","import AbstractView from \"./abstract-view\";\nimport constants from \"../constants\";\n\nconst getAnswerType = (answer) => {\n  if (!answer.correct) {\n    return `wrong`;\n  }\n\n  if (answer.correct && answer.time < constants.LOWER_TIME_LIMIT) {\n    return `fast`;\n  }\n\n  if (answer.correct && answer.time > constants.HIGHER_TIME_LIMIT) {\n    return `slow`;\n  }\n\n  return `correct`;\n};\n\nclass StatisticView extends AbstractView {\n  constructor(answers) {\n    super();\n    this.answers = answers;\n    this.answersType = this.answers.map((answer) => getAnswerType(answer));\n  }\n\n  get template() {\n    return `\n    <div class=\"stats\">\n      <ul class=\"stats\">\n      ${this.answersType.map((answerType) => `<li class=\"stats__result stats__result--${answerType}\"></li>`)\n      .join(``)}\n      ${new Array(10 - this.answersType.length)\n      .fill(`<li class=\"stats__result stats__result--unknown\"></li>`)\n      .join(``)}\n      </ul>\n    </div>`;\n  }\n}\n\nexport default StatisticView;\n","import constants from \"../constants\";\n\nexport const getAnswersQuantity = (state) => {\n  const correctAnswers = state.answers.filter((answer) => {\n    return answer.correct;\n  });\n\n  const slowAnswers = state.answers.filter((answer) => {\n    return answer.time > constants.HIGHER_TIME_LIMIT && answer.correct;\n  });\n\n  const fastAnswers = state.answers.filter((answer) => {\n    return answer.time < constants.LOWER_TIME_LIMIT && answer.correct;\n  });\n\n  return {\n    correct: correctAnswers.length,\n    slow: slowAnswers.length,\n    fast: fastAnswers.length,\n    lives: state.lives\n  };\n};\n\nexport const countPoints = (answers) => {\n  return answers.correct * constants.CORRECT_ANSWER + answers.fast * constants.ADDITIONAL_POINTS + answers.slow * -constants.ADDITIONAL_POINTS + answers.lives * constants.ADDITIONAL_POINTS;\n};\n","import AbstractView from \"./abstract-view\";\nimport StatisticView from \"./statistic-view\";\nimport {countPoints, getAnswersQuantity} from \"../logic/game-statistic\";\nimport constants from \"../constants\";\n\nclass GameResultsView extends AbstractView {\n  constructor(state, index) {\n    super();\n    this.index = index;\n    this.state = state;\n    this.answers = this.state.answers;\n    this.win = this.state.win;\n    this.statsview = new StatisticView(this.answers).template;\n    this.answerResult = getAnswersQuantity(state);\n    this.totalResult = countPoints(this.answerResult);\n  }\n\n  get template() {\n    return `\n          <table class=\"result__table\">\n        <tr>\n          <td class=\"result__number\">${this.index}.</td>\n          <td colspan=\"2\">\n            ${this.statsview}\n          </td>\n          <td class=\"result__points\">√ó&nbsp;100</td>\n          <td class=\"result__total\">${this.answerResult.correct * constants.CORRECT_ANSWER}</td>\n        </tr>\n        <tr>\n          <td></td>\n          <td class=\"result__extra\">–ë–æ–Ω—É—Å –∑–∞ —Å–∫–æ—Ä–æ—Å—Ç—å:</td>\n          <td class=\"result__extra\">${this.answerResult.fast}&nbsp;<span class=\"stats__result stats__result--fast\"></span></td>\n          <td class=\"result__points\">√ó&nbsp;50</td>\n          <td class=\"result__total\">${this.answerResult.fast * constants.ADDITIONAL_POINTS}</td>\n        </tr>\n        <tr>\n          <td></td>\n          <td class=\"result__extra\">–ë–æ–Ω—É—Å –∑–∞ –∂–∏–∑–Ω–∏:</td>\n          <td class=\"result__extra\">${this.answerResult.lives}&nbsp;<span class=\"stats__result stats__result--alive\"></span></td>\n          <td class=\"result__points\">√ó&nbsp;50</td>\n          <td class=\"result__total\">${this.answerResult.lives * constants.ADDITIONAL_POINTS}</td>\n        </tr>\n        <tr>\n          <td></td>\n          <td class=\"result__extra\">–®—Ç—Ä–∞—Ñ –∑–∞ –º–µ–¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å:</td>\n          <td class=\"result__extra\">${this.answerResult.slow}&nbsp;<span class=\"stats__result stats__result--slow\"></span></td>\n          <td class=\"result__points\">√ó&nbsp;50</td>\n          <td class=\"result__total\">${this.answerResult.slow * -constants.ADDITIONAL_POINTS}</td>\n        </tr>\n        <tr>\n          <td colspan=\"5\" class=\"result__total  result__total--final\">${this.totalResult}</td>\n        </tr>\n      </table>`;\n  }\n}\n\nexport default GameResultsView;\n","import AbstractView from \"./abstract-view\";\nimport FooterView from \"./footer-view\";\nimport GameResultsView from \"./game-results-view\";\nimport Application from \"../application\";\nimport constants from \"../constants\";\n\nclass ManyResultsView extends AbstractView {\n  constructor(data) {\n    super();\n    this.data = data.reverse();\n    this.win = this.data[0].win;\n    this.results = [];\n\n    // –≤—ã–æ–¥–∏—Ç—å —Ç–æ–ª—å–∫–æ —Ç—Ä–∏ –ø–æ—Å–ª–µ–¥–Ω–∏—Ö —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞\n    for (let i = 0; i < Math.min(constants.MAX_RESULTS_NUMBER, this.data.length); i++) {\n      this.results.push(new GameResultsView(this.data[i], i + 1).template);\n    }\n  }\n\n  get template() {\n    return `\n    <header class=\"header\">\n      <div class=\"header__back\">\n        <button class=\"back\">\n          <img src=\"img/arrow_left.svg\" width=\"45\" height=\"45\" alt=\"Back\">\n          <img src=\"img/logo_small.svg\" width=\"101\" height=\"44\">\n        </button>\n      </div>\n    </header>\n    <div class=\"result\">\n      <h1>${this.win === true ? `–ü–æ–±–µ–¥–∞! üíÅ‚Äç‚ôÇÔ∏è` : `–ü–æ—Ä–∞–∂–µ–Ω–∏–µ! ü§¶‚Äç`}</h1>\n      ${this.results}\n    </div>\n    ${new FooterView().template}`;\n  }\n\n  bind() {\n    const backButton = this.element.querySelector(`.back`);\n\n    backButton.onclick = () => {\n      Application.showGreeting();\n    };\n  }\n}\n\nexport default ManyResultsView;\n","import GreetingView from \"./views/greeting-view\";\nimport RulesView from \"./views/rules-view\";\nimport GameScreen from \"./logic/game-screen\";\nimport GameModel from \"./logic/game-model\";\nimport SplashScreen from \"./splash/splash-screen\";\nimport {showErrorMessage} from \"./util\";\nimport Loader from \"./loader\";\nimport ManyResultsView from \"./views/many-results-view\";\nimport constants from \"./constants\";\n\nconst changeScreen = (domElement) => {\n  const screen = document.querySelector(`.central`);\n  screen.innerHTML = ``;\n  screen.appendChild(domElement);\n};\n\nlet gameData;\n\nconst pause = (time) => {\n  return new Promise((resolve) => {\n    setTimeout(() => {\n      resolve();\n    }, time);\n  });\n};\n\nclass Application {\n  static async start() {\n    const splash = new SplashScreen();\n    const greeting = new GreetingView();\n    greeting.hide();\n    greeting.addElement(splash.element);\n    changeScreen(greeting.element);\n    try {\n      gameData = await Loader.loadData();\n      greeting.fadeIn();\n      splash.fadeOut();\n      await pause(constants.PAUSE_TIME);\n      greeting.removeElement(splash.element);\n    } catch (e) {\n      showErrorMessage(e);\n    }\n  }\n\n  static showGreeting() {\n    const greeting = new GreetingView();\n    changeScreen(greeting.element);\n  }\n\n  static showRules() {\n    const rules = new RulesView();\n    changeScreen(rules.element);\n  }\n\n  static showGame(player) {\n    const game = new GameScreen(new GameModel(gameData, player));\n    changeScreen(game.element);\n    game.init();\n  }\n\n  static async showResults(model) {\n    const playerName = model.player;\n    try {\n      await Loader.saveResults(model.state, playerName);\n      const results = new ManyResultsView(await Loader.loadResults(playerName), playerName);\n      changeScreen(results.element);\n    } catch (e) {\n      showErrorMessage(e);\n    }\n  }\n}\n\nexport default Application;\n","import AbstractView from \"./abstract-view\";\nimport constants from \"../constants\";\n\nclass GameFirstView extends AbstractView {\n  constructor(level) {\n    super();\n    this.question = level.question;\n    this.answers = level.answers;\n  }\n\n  get template() {\n    return `\n    <div class=\"game\">\n      <p class=\"game__task\">${this.question}</p>\n      <form class=\"game__content\">\n        <div class=\"game__option\">\n          <img src=\"${this.answers[0].image.url}\" alt=\"Option 1\" width=\"468\" height=\"458\">\n          <label class=\"game__answer game__answer--photo\">\n            <input name=\"question1\" type=\"radio\" value=\"photo\">\n            <span>–§–æ—Ç–æ</span>\n          </label>\n          <label class=\"game__answer game__answer--paint\">\n            <input name=\"question1\" type=\"radio\" value=\"painting\">\n            <span>–†–∏—Å—É–Ω–æ–∫</span>\n          </label>\n        </div>\n        <div class=\"game__option\">\n          <img src=\"${this.answers[1].image.url}\" alt=\"Option 2\" width=\"468\" height=\"458\">\n          <label class=\"game__answer  game__answer--photo\">\n            <input name=\"question2\" type=\"radio\" value=\"photo\">\n            <span>–§–æ—Ç–æ</span>\n          </label>\n          <label class=\"game__answer  game__answer--paint\">\n            <input name=\"question2\" type=\"radio\" value=\"painting\">\n            <span>–†–∏—Å—É–Ω–æ–∫</span>\n          </label>\n        </div>\n      </form>\n    </div>`;\n  }\n\n  onAnswer() {\n  }\n\n  bind() {\n    const form = this.element.querySelector(`.game__content`);\n    const radio = form.querySelectorAll(`[type=radio]`);\n\n    form.addEventListener(`change`, () => {\n      const checked = [];\n\n      for (const item of radio) {\n        // –∑–∞–ø–∏—Å—å —á–µ–∫–Ω—É—Ç–æ–≥–æ —ç–ª–µ–º–µ–Ω—Ç–∞ –≤ –º–∞—Å—Å–∏–≤\n        if (item.checked) {\n          checked.push(item);\n        }\n      }\n\n      if (checked.length === constants.CHECKED_RADIO_COUNT) {\n        const userAnswer = checked[0].value === this.answers[0].type && checked[1].value === this.answers[1].type;\n        this.onAnswer(userAnswer);\n        form.reset();\n      }\n    });\n  }\n}\n\nexport default GameFirstView;\n","import AbstractView from \"./abstract-view\";\n\nclass GameSecondView extends AbstractView {\n  constructor(level) {\n    super();\n    this.question = level.question;\n    this.answers = level.answers;\n  }\n\n  get template() {\n    return `\n    <div class=\"game\">\n      <p class=\"game__task\">${this.question}</p>\n      <form class=\"game__content  game__content--wide\">\n        <div class=\"game__option\">\n          <img src=\"${this.answers[0].image.url}\" alt=\"Option 1\" width=\"705\" height=\"455\">\n          <label class=\"game__answer  game__answer--photo\">\n            <input name=\"question1\" type=\"radio\" value=\"photo\">\n            <span>–§–æ—Ç–æ</span>\n          </label>\n          <label class=\"game__answer  game__answer--wide  game__answer--paint\">\n            <input name=\"question1\" type=\"radio\" value=\"painting\">\n            <span>–†–∏—Å—É–Ω–æ–∫</span>\n          </label>\n        </div>\n      </form>\n    </div>`;\n  }\n\n  onAnswer() {\n  }\n\n  bind() {\n    const form = this.element.querySelector(`.game__content`);\n\n    form.addEventListener(`change`, (evt) => {\n      const target = evt.target;\n      let answer;\n\n      if (target.tagName === `INPUT`) {\n        answer = target;\n        const userAnswer = answer.value === this.answers[0].type;\n        this.onAnswer(userAnswer);\n        form.reset();\n      }\n    });\n  }\n}\n\nexport default GameSecondView;\n","import AbstractView from \"./abstract-view\";\n\nclass GameThirdView extends AbstractView {\n  constructor(level) {\n    super();\n    this.question = level.question;\n    this.answers = level.answers;\n  }\n\n  get template() {\n    return `\n    <div class=\"game\">\n      <p class=\"game__task\">${this.question}</p>\n      <form class=\"game__content  game__content--triple\">\n        <div class=\"game__option\">\n          <img class=\"game__image\" src=\"${this.answers[0].image.url}\" alt=\"Option 1\" width=\"304\" height=\"455\">\n        </div>\n        <div class=\"game__option  game__option--selected\">\n          <img class=\"game__image\" src=\"${this.answers[1].image.url}\" alt=\"Option 1\" width=\"304\" height=\"455\">\n        </div>\n        <div class=\"game__option\">\n          <img class=\"game__image\" src=\"${this.answers[2].image.url}\" alt=\"Option 1\" width=\"304\" height=\"455\">\n        </div>\n      </form>\n    </div>`;\n  }\n\n  onAnswer() {\n  }\n\n  bind() {\n    const form = this.element.querySelector(`.game__content`);\n    const answer = this.question.includes(`—Ñ–æ—Ç–æ`) ? `photo` : `painting`;\n    let answerUrl = ``;\n\n    for (let item of this.answers) {\n      if (item.type === answer) {\n        answerUrl = item.image.url;\n        break;\n      }\n    }\n\n    form.addEventListener(`click`, (evt) => {\n      let target = evt.target;\n      const userAnswer = target.children[0].src === answerUrl;\n      this.onAnswer(userAnswer);\n    });\n  }\n}\n\nexport default GameThirdView;\n","import AbstractView from \"./abstract-view\";\n\nclass ModalView extends AbstractView {\n  constructor() {\n    super();\n  }\n\n  get template() {\n    return `\n    <div class=\"modal\">\n      <p class=\"modal__text\">–†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ç–µ–∫—É—â–µ–π –∏–≥—Ä—ã –±—É–¥—É—Ç –ø–æ—Ç–µ—Ä—è–Ω—ã. <span>–í—ã–π—Ç–∏?</span></p>\n      <div class=\"modal__container\">\n        <button class=\"modal__button modal__yes\">–î–∞</button>\n        <button class=\"modal__button modal__no\">–ù–µ—Ç</button>\n      </div>\n    </div>`;\n  }\n\n  bind() {\n    this.element.querySelectorAll(`.modal__button`).forEach((elem) => {\n      elem.addEventListener(`click`, () => {\n        if (elem.classList.contains(`modal__yes`)) {\n          this.onExitClick();\n        } else {\n          this.onContinueClick();\n        }\n      });\n    });\n\n    this.element.style = `position: fixed; top: 0; left: 0; z-index: 1; width: 100%; height: 100vh; background-color: rgba(0, 0, 0, 0.2);`;\n  }\n\n  onExitClick() {\n  }\n\n  onContinueClick() {\n  }\n}\n\nexport default ModalView;\n","import HeaderView from \"../views/header-view\";\nimport Application from \"../application\";\nimport StatisticView from \"../views/statistic-view\";\nimport FooterView from \"../views/footer-view\";\nimport GameFirstView from \"../views/game-first-view\";\nimport GameSecondView from \"../views/game-second-view\";\nimport GameThirdView from \"../views/game-third-view\";\nimport ModalView from \"../views/modal-view\";\n\nconst getLevel = (game, model) => {\n  if (game === `two-of-two`) {\n    return new GameFirstView(model.getCurrentLevel());\n  }\n  if (game === `tinder-like`) {\n    return new GameSecondView(model.getCurrentLevel());\n  }\n  return new GameThirdView(model.getCurrentLevel());\n};\n\nclass GameScreen {\n  constructor(model) {\n    this.model = model;\n    this.header = this._getHeader();\n    this.content = this._getNeededView();\n    this.statistic = new StatisticView(this.model.state.answers);\n    this.footer = new FooterView();\n\n    this.root = document.createElement(`div`);\n    this.root.appendChild(this.header.element);\n    this.root.appendChild(this.content.element);\n    this.root.appendChild(this.statistic.element);\n    this.root.appendChild(this.footer.element);\n\n    this._interval = null;\n  }\n\n  get element() {\n    return this.root;\n  }\n\n  _getHeader() {\n    const header = new HeaderView(this.model.state);\n    header.onButtonClick = () => {\n      this._stopGame();\n      this.root.appendChild(this._getModal().element);\n    };\n\n    return header;\n  }\n\n  _getModal() {\n    const modal = new ModalView();\n    modal.onExitClick = () => {\n      Application.showGreeting();\n    };\n    modal.onContinueClick = () => {\n      this.root.lastChild.remove();\n      this._startTimer();\n    };\n    return modal;\n  }\n\n  _stopGame() {\n    clearInterval(this._interval);\n  }\n\n  _startTimer() {\n    this._interval = setInterval(() => {\n      this.model.tick();\n      if (this.model.state.time <= 0) {\n        this._stopGame();\n        this._userAnswer(false);\n      }\n      this._updateHeader();\n    }, 1000);\n  }\n\n  _getNeededView() {\n    const gameType = this.model.data[this.model.state.level].type;\n    return getLevel(gameType, this.model);\n  }\n\n  init() {\n    this._changeLevel();\n    this._startTimer();\n  }\n\n  _userAnswer(answer) {\n    this._stopGame();\n    this.model.addAnswer(answer);\n\n    if (!answer) {\n      this.model.die();\n    }\n\n    if (this.model.isDead() || !this.model.hasNextLevel()) {\n      if (!this.model.isDead()) {\n        this.model.win();\n      }\n      this._endGame();\n    } else {\n      this.model.nextLevel();\n      this.init();\n    }\n  }\n\n  _endGame() {\n    Application.showResults(this.model);\n    this.model.restart();\n  }\n\n  _updateHeader() {\n    const header = this._getHeader();\n    this.root.replaceChild(header.element, this.header.element);\n    this.header = header;\n  }\n\n  _updateStatistic() {\n    const statistic = new StatisticView(this.model.state.answers);\n    this.root.replaceChild(statistic.element, this.statistic.element);\n    this.statistic = statistic;\n  }\n\n  _changeLevel() {\n    this.model.rebootTime();\n    this._updateHeader();\n    this._updateStatistic();\n\n    const gameType = this.model.getCurrentLevel().type;\n    const level = getLevel(gameType, this.model);\n    level.onAnswer = this._userAnswer.bind(this);\n    this._changeContentView(level);\n  }\n\n  _changeContentView(view) {\n    this.root.replaceChild(view.element, this.content.element);\n    this.content = view;\n  }\n}\n\nexport default GameScreen;\n"],"names":["getElementFromTemplate","markup","domElement","document","createElement","innerHTML","showErrorMessage","message","template","textContent","styles","style","cssText","join","body","appendChild","AbstractView","new","target","Error","_element","render","bind","constants","Object","freeze","HeaderView","state","element","querySelector","addEventListener","onButtonClick","stopFlashing","time","LAST_SEC","classList","add","remove","Array","INITIAL_STATE","lives","fill","FooterView","GreetingView","continueButton","onclick","showRules","children","opacity","insertAdjacentElement","RulesView","input","button","backButton","form","oninput","disabled","value","length","MIN_NAME_LENGTH","evt","preventDefault","showGame","reset","showGreeting","initialGame","GameModel","data","player","restart","index","getLevel","_state","level","win","answer","answers","push","correct","assign","SplashScreen","DEFAULT_NAME","APP_ID","checkStatus","response","ok","status","statusText","toJSON","json","Loader","fetch","SERVER_URL","name","JSON","stringify","requestSettings","getAnswerType","LOWER_TIME_LIMIT","HIGHER_TIME_LIMIT","StatisticView","answersType","map","answerType","getAnswersQuantity","correctAnswers","filter","slowAnswers","fastAnswers","countPoints","CORRECT_ANSWER","fast","ADDITIONAL_POINTS","slow","GameResultsView","statsview","answerResult","totalResult","ManyResultsView","reverse","results","i","Math","min","MAX_RESULTS_NUMBER","changeScreen","screen","gameData","pause","Promise","resolve","Application","hide","addElement","splash","greeting","loadData","fadeIn","fadeOut","PAUSE_TIME","removeElement","rules","game","GameScreen","init","model","saveResults","playerName","loadResults","GameFirstView","question","radio","querySelectorAll","checked","item","CHECKED_RADIO_COUNT","userAnswer","type","onAnswer","image","url","GameSecondView","tagName","GameThirdView","includes","answerUrl","src","ModalView","forEach","elem","contains","onExitClick","onContinueClick","getCurrentLevel","header","_getHeader","content","_getNeededView","statistic","footer","root","_interval","_stopGame","_getModal","modal","lastChild","_startTimer","setInterval","tick","_userAnswer","_updateHeader","gameType","_changeLevel","addAnswer","die","isDead","hasNextLevel","_endGame","nextLevel","showResults","replaceChild","rebootTime","_updateStatistic","_changeContentView","view"],"mappings":"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"}