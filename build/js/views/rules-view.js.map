{"version":3,"file":"rules-view.js","sources":["../util.js","abstract-view.js","../constants.js","footer-view.js","greeting-view.js","header-view.js","statistic-view.js","game-first-view.js","game-second-view.js","game-third-view.js","modal-view.js","../logic/game-screen.js","../logic/initial-game.js","../logic/game-model.js","../splash/splash-screen.js","../loader.js","../logic/game-statistic.js","game-results-view.js","many-results-view.js","../application.js","rules-view.js"],"sourcesContent":["export const getElementFromTemplate = (markup) => {\n  let domElement = document.createElement(`div`);\n  domElement.innerHTML = markup;\n  return domElement;\n};\n\nexport const showErrorMessage = (message) => {\n  const template = document.createElement(`div`);\n  template.textContent = message;\n\n  const styles = [\n    `position: fixed`,\n    `top: 25%`,\n    `left: 50%`,\n    `z-index: 100`,\n    `width: 800px`,\n    `padding: 20px`,\n    `color: #fff`,\n    `text-align: center`,\n    `transform: translate(-50%, -50%)`,\n    `border-radius: 2px`,\n    `background-color: #DC143C`\n  ];\n\n  template.style.cssText = styles.join(`;`);\n  document.body.appendChild(template);\n};\n","import {getElementFromTemplate} from \"../util\";\n\nclass AbstractView {\n  constructor() {\n    if (new.target === AbstractView) {\n      throw new Error(`Can not create example of AbstractView, only the new one class`);\n    }\n  }\n\n  get template() {\n    throw new Error(`Template is required`);\n  }\n\n  get element() {\n    if (this._element) {\n      return this._element;\n    }\n    this._element = this.render();\n    this.bind(this._element);\n    return this._element;\n  }\n\n  render() {\n    return getElementFromTemplate(this.template);\n  }\n\n  bind() {\n  }\n}\n\nexport default AbstractView;\n","const constants = {\n  MAX_ANSWERS_COUNT: 10,\n  MAX_WRONG_ANSWERS: 3,\n  CORRECT_ANSWER: 100,\n  ADDITIONAL_POINTS: 50,\n  LOWER_TIME_LIMIT: 10,\n  HIGHER_TIME_LIMIT: 20,\n  CHECKED_RADIO_COUNT: 2,\n  MIN_NAME_LENGTH: 2,\n  INITIAL_STATE: Object.freeze({\n    lives: 3,\n    time: 30,\n    win: false,\n    level: 0\n  }),\n  SERVER_URL: `https://es.dump.academy/pixel-hunter`,\n  MAX_RESULTS_NUMBER: 3,\n  LAST_SEC: 5,\n  PAUSE_TIME: 3000\n};\n\nexport default constants;\n","import AbstractView from \"./abstract-view\";\n\nclass FooterView extends AbstractView {\n  constructor() {\n    super();\n  }\n\n  get template() {\n    return `\n    <footer class=\"footer\">\n      <a href=\"https://htmlacademy.ru\" class=\"social-link social-link--academy\">HTML Academy</a>\n      <span class=\"footer__made-in\">Сделано в <a href=\"https://htmlacademy.ru\" class=\"footer__link\">HTML Academy</a> &copy; 2016</span>\n      <div class=\"footer__social-links\">\n        <a href=\"https://twitter.com/htmlacademy_ru\" class=\"social-link  social-link--tw\">Твиттер</a>\n        <a href=\"https://www.instagram.com/htmlacademy/\" class=\"social-link  social-link--ins\">Инстаграм</a>\n        <a href=\"https://www.facebook.com/htmlacademy\" class=\"social-link  social-link--fb\">Фэйсбук</a>\n        <a href=\"https://vk.com/htmlacademy\" class=\"social-link  social-link--vk\">Вконтакте</a>\n      </div>\n    </footer>`;\n  }\n}\n\n\nexport default FooterView;\n","import AbstractView from \"./abstract-view\";\nimport Application from \"../application\";\nimport FooterView from \"./footer-view\";\n\nclass GreetingView extends AbstractView {\n  constructor() {\n    super();\n  }\n\n  get template() {\n    return `\n    <div class=\"greeting central--blur\">\n      <div class=\"greeting__logo\"><img src=\"img/logo_big.png\" width=\"201\" height=\"89\" alt=\"Pixel Hunter\"></div>\n      <h1 class=\"greeting__asterisk\">*</h1>\n      <div class=\"greeting__challenge\">\n        <h3>Лучшие художники-фотореалисты бросают&nbsp;тебе&nbsp;вызов!</h3>\n        <p>Правила игры просты.<br>\n          Нужно отличить рисунок&nbsp;от фотографии и сделать выбор.<br>\n          Задача кажется тривиальной, но не думай, что все так просто.<br>\n          Фотореализм обманчив и коварен.<br>\n          Помни, главное — смотреть очень внимательно.</p>\n      </div>\n      <div class=\"greeting__continue\"><span><img src=\"img/arrow_right.svg\" width=\"64\" height=\"64\" alt=\"Next\"></span></div>\n    </div>\n    ${new FooterView().template}`;\n  }\n\n  bind() {\n    const continueButton = this.element.querySelector(`.greeting__continue`);\n    continueButton.onclick = () => {\n      Application.showRules();\n    };\n  }\n\n  hide() {\n    this.element.children[0].style.opacity = `0`;\n  }\n\n  fadeIn() {\n    this.element.children[1].style.opacity = `1`;\n    this.element.children[1].classList.add(`fade--in`);\n  }\n\n  addElement(element) {\n    this.element.insertAdjacentElement(`afterbegin`, element);\n    this.element.children[0].style = `position: absolute; top: 0;`;\n  }\n\n  removeElement(element) {\n    element.remove();\n  }\n}\n\nexport default GreetingView;\n","import AbstractView from \"./abstract-view\";\nimport constants from \"../constants\";\n\nclass HeaderView extends AbstractView {\n  constructor(state) {\n    super();\n    this.state = state;\n  }\n\n\n  get template() {\n    return `\n    <header class=\"header\">\n      <div class=\"header__back\">\n        <button class=\"back\">\n          <img src=\"img/arrow_left.svg\" width=\"45\" height=\"45\" alt=\"Back\">\n          <img src=\"img/logo_small.svg\" width=\"101\" height=\"44\">\n        </button>\n      </div>\n      <h1 class=\"game__timer\">${this.state.time}</h1>\n      <div class=\"game__lives\">\n        ${new Array(constants.INITIAL_STATE.lives - this.state.lives)\n      .fill(`<img src=\"img/heart__empty.svg\" class=\"game__heart\" alt=\"Life\" width=\"32\" height=\"32\">`)\n      .join(``)}\n        ${new Array(this.state.lives)\n      .fill(`<img src=\"img/heart__full.svg\" class=\"game__heart\" alt=\"Life\" width=\"32\" height=\"32\">`)\n      .join(``)}\n      </div>\n    </header>`;\n  }\n\n  bind() {\n    this.element.querySelector(`.back`).addEventListener(`click`, () => {\n      this.onButtonClick();\n      this.stopFlashing();\n    });\n\n    if (this.state.time <= constants.LAST_SEC) {\n      this.element.querySelector(`.game__timer`).classList.add(`flashing`);\n    }\n  }\n\n  onButtonClick() {\n  }\n\n  stopFlashing() {\n    this.element.querySelector(`.game__timer`).classList.remove(`flashing`);\n  }\n}\n\nexport default HeaderView;\n","import AbstractView from \"./abstract-view\";\nimport constants from \"../constants\";\n\nconst getAnswerType = (answer) => {\n  if (!answer.correct) {\n    return `wrong`;\n  }\n\n  if (answer.correct && answer.time < constants.LOWER_TIME_LIMIT) {\n    return `fast`;\n  }\n\n  if (answer.correct && answer.time > constants.HIGHER_TIME_LIMIT) {\n    return `slow`;\n  }\n\n  return `correct`;\n};\n\nclass StatisticView extends AbstractView {\n  constructor(answers) {\n    super();\n    this.answers = answers;\n    this.answersType = this.answers.map((answer) => getAnswerType(answer));\n  }\n\n  get template() {\n    return `\n    <div class=\"stats\">\n      <ul class=\"stats\">\n      ${this.answersType.map((answerType) => `<li class=\"stats__result stats__result--${answerType}\"></li>`)\n      .join(``)}\n      ${new Array(10 - this.answersType.length)\n      .fill(`<li class=\"stats__result stats__result--unknown\"></li>`)\n      .join(``)}\n      </ul>\n    </div>`;\n  }\n}\n\nexport default StatisticView;\n","import AbstractView from \"./abstract-view\";\nimport constants from \"../constants\";\n\nclass GameFirstView extends AbstractView {\n  constructor(level) {\n    super();\n    this.question = level.question;\n    this.answers = level.answers;\n  }\n\n  get template() {\n    return `\n    <div class=\"game\">\n      <p class=\"game__task\">${this.question}</p>\n      <form class=\"game__content\">\n        <div class=\"game__option\">\n          <img src=\"${this.answers[0].image.url}\" alt=\"Option 1\" width=\"468\" height=\"458\">\n          <label class=\"game__answer game__answer--photo\">\n            <input name=\"question1\" type=\"radio\" value=\"photo\">\n            <span>Фото</span>\n          </label>\n          <label class=\"game__answer game__answer--paint\">\n            <input name=\"question1\" type=\"radio\" value=\"painting\">\n            <span>Рисунок</span>\n          </label>\n        </div>\n        <div class=\"game__option\">\n          <img src=\"${this.answers[1].image.url}\" alt=\"Option 2\" width=\"468\" height=\"458\">\n          <label class=\"game__answer  game__answer--photo\">\n            <input name=\"question2\" type=\"radio\" value=\"photo\">\n            <span>Фото</span>\n          </label>\n          <label class=\"game__answer  game__answer--paint\">\n            <input name=\"question2\" type=\"radio\" value=\"painting\">\n            <span>Рисунок</span>\n          </label>\n        </div>\n      </form>\n    </div>`;\n  }\n\n  onAnswer() {\n  }\n\n  bind() {\n    const form = this.element.querySelector(`.game__content`);\n    const radio = form.querySelectorAll(`[type=radio]`);\n\n    form.addEventListener(`change`, () => {\n      const checked = [];\n\n      for (const item of radio) {\n        // запись чекнутого элемента в массив\n        if (item.checked) {\n          checked.push(item);\n        }\n      }\n\n      if (checked.length === constants.CHECKED_RADIO_COUNT) {\n        const userAnswer = checked[0].value === this.answers[0].type && checked[1].value === this.answers[1].type;\n        this.onAnswer(userAnswer);\n        form.reset();\n      }\n    });\n  }\n}\n\nexport default GameFirstView;\n","import AbstractView from \"./abstract-view\";\n\nclass GameSecondView extends AbstractView {\n  constructor(level) {\n    super();\n    this.question = level.question;\n    this.answers = level.answers;\n  }\n\n  get template() {\n    return `\n    <div class=\"game\">\n      <p class=\"game__task\">${this.question}</p>\n      <form class=\"game__content  game__content--wide\">\n        <div class=\"game__option\">\n          <img src=\"${this.answers[0].image.url}\" alt=\"Option 1\" width=\"705\" height=\"455\">\n          <label class=\"game__answer  game__answer--photo\">\n            <input name=\"question1\" type=\"radio\" value=\"photo\">\n            <span>Фото</span>\n          </label>\n          <label class=\"game__answer  game__answer--wide  game__answer--paint\">\n            <input name=\"question1\" type=\"radio\" value=\"painting\">\n            <span>Рисунок</span>\n          </label>\n        </div>\n      </form>\n    </div>`;\n  }\n\n  onAnswer() {\n  }\n\n  bind() {\n    const form = this.element.querySelector(`.game__content`);\n\n    form.addEventListener(`change`, (evt) => {\n      const target = evt.target;\n      let answer;\n\n      if (target.tagName === `INPUT`) {\n        answer = target;\n        const userAnswer = answer.value === this.answers[0].type;\n        this.onAnswer(userAnswer);\n        form.reset();\n      }\n    });\n  }\n}\n\nexport default GameSecondView;\n","import AbstractView from \"./abstract-view\";\n\nclass GameThirdView extends AbstractView {\n  constructor(level) {\n    super();\n    this.question = level.question;\n    this.answers = level.answers;\n  }\n\n  get template() {\n    return `\n    <div class=\"game\">\n      <p class=\"game__task\">${this.question}</p>\n      <form class=\"game__content  game__content--triple\">\n        <div class=\"game__option\">\n          <img class=\"game__image\" src=\"${this.answers[0].image.url}\" alt=\"Option 1\" width=\"304\" height=\"455\">\n        </div>\n        <div class=\"game__option  game__option--selected\">\n          <img class=\"game__image\" src=\"${this.answers[1].image.url}\" alt=\"Option 1\" width=\"304\" height=\"455\">\n        </div>\n        <div class=\"game__option\">\n          <img class=\"game__image\" src=\"${this.answers[2].image.url}\" alt=\"Option 1\" width=\"304\" height=\"455\">\n        </div>\n      </form>\n    </div>`;\n  }\n\n  onAnswer() {\n  }\n\n  bind() {\n    const form = this.element.querySelector(`.game__content`);\n    const answer = this.question.includes(`фото`) ? `photo` : `painting`;\n    let answerUrl = ``;\n\n    for (let item of this.answers) {\n      if (item.type === answer) {\n        answerUrl = item.image.url;\n        break;\n      }\n    }\n\n    form.addEventListener(`click`, (evt) => {\n      let target = evt.target;\n      const userAnswer = target.children[0].src === answerUrl;\n      this.onAnswer(userAnswer);\n    });\n  }\n}\n\nexport default GameThirdView;\n","import AbstractView from \"./abstract-view\";\n\nclass ModalView extends AbstractView {\n  constructor() {\n    super();\n  }\n\n  get template() {\n    return `\n    <div class=\"modal\">\n      <p class=\"modal__text\">Результаты текущей игры будут потеряны. <span>Выйти?</span></p>\n      <div class=\"modal__container\">\n        <button class=\"modal__button modal__yes\">Да</button>\n        <button class=\"modal__button modal__no\">Нет</button>\n      </div>\n    </div>`;\n  }\n\n  bind() {\n    this.element.querySelectorAll(`.modal__button`).forEach((elem) => {\n      elem.addEventListener(`click`, () => {\n        if (elem.classList.contains(`modal__yes`)) {\n          this.onExitClick();\n        } else {\n          this.onContinueClick();\n        }\n      });\n    });\n\n    this.element.style = `position: fixed; top: 0; left: 0; z-index: 1; width: 100%; height: 100vh; background-color: rgba(0, 0, 0, 0.2);`;\n  }\n\n  onExitClick() {\n  }\n\n  onContinueClick() {\n  }\n}\n\nexport default ModalView;\n","import HeaderView from \"../views/header-view\";\nimport Application from \"../application\";\nimport StatisticView from \"../views/statistic-view\";\nimport FooterView from \"../views/footer-view\";\nimport GameFirstView from \"../views/game-first-view\";\nimport GameSecondView from \"../views/game-second-view\";\nimport GameThirdView from \"../views/game-third-view\";\nimport ModalView from \"../views/modal-view\";\n\nconst getLevel = (game, model) => {\n  if (game === `two-of-two`) {\n    return new GameFirstView(model.getCurrentLevel());\n  }\n  if (game === `tinder-like`) {\n    return new GameSecondView(model.getCurrentLevel());\n  }\n  return new GameThirdView(model.getCurrentLevel());\n};\n\nclass GameScreen {\n  constructor(model) {\n    this.model = model;\n    this.header = this._getHeader();\n    this.content = this._getNeededView();\n    this.statistic = new StatisticView(this.model.state.answers);\n    this.footer = new FooterView();\n\n    this.root = document.createElement(`div`);\n    this.root.appendChild(this.header.element);\n    this.root.appendChild(this.content.element);\n    this.root.appendChild(this.statistic.element);\n    this.root.appendChild(this.footer.element);\n\n    this._interval = null;\n  }\n\n  get element() {\n    return this.root;\n  }\n\n  _getHeader() {\n    const header = new HeaderView(this.model.state);\n    header.onButtonClick = () => {\n      this._stopGame();\n      this.root.appendChild(this._getModal().element);\n    };\n\n    return header;\n  }\n\n  _getModal() {\n    const modal = new ModalView();\n    modal.onExitClick = () => {\n      Application.showGreeting();\n    };\n    modal.onContinueClick = () => {\n      this.root.lastChild.remove();\n      this._startTimer();\n    };\n    return modal;\n  }\n\n  _stopGame() {\n    clearInterval(this._interval);\n  }\n\n  _startTimer() {\n    this._interval = setInterval(() => {\n      this.model.tick();\n      if (this.model.state.time <= 0) {\n        this._stopGame();\n        this._userAnswer(false);\n      }\n      this._updateHeader();\n    }, 1000);\n  }\n\n  _getNeededView() {\n    const gameType = this.model.data[this.model.state.level].type;\n    return getLevel(gameType, this.model);\n  }\n\n  init() {\n    this._changeLevel();\n    this._startTimer();\n  }\n\n  _userAnswer(answer) {\n    this._stopGame();\n    this.model.addAnswer(answer);\n\n    if (!answer) {\n      this.model.die();\n    }\n\n    if (this.model.isDead() || !this.model.hasNextLevel()) {\n      if (!this.model.isDead()) {\n        this.model.win();\n      }\n      this._endGame();\n    } else {\n      this.model.nextLevel();\n      this.init();\n    }\n  }\n\n  _endGame() {\n    Application.showResults(this.model);\n    this.model.restart();\n  }\n\n  _updateHeader() {\n    const header = this._getHeader();\n    this.root.replaceChild(header.element, this.header.element);\n    this.header = header;\n  }\n\n  _updateStatistic() {\n    const statistic = new StatisticView(this.model.state.answers);\n    this.root.replaceChild(statistic.element, this.statistic.element);\n    this.statistic = statistic;\n  }\n\n  _changeLevel() {\n    this.model.rebootTime();\n    this._updateHeader();\n    this._updateStatistic();\n\n    const gameType = this.model.getCurrentLevel().type;\n    const level = getLevel(gameType, this.model);\n    level.onAnswer = this._userAnswer.bind(this);\n    this._changeContentView(level);\n  }\n\n  _changeContentView(view) {\n    this.root.replaceChild(view.element, this.content.element);\n    this.content = view;\n  }\n}\n\nexport default GameScreen;\n","const initialGame = {\n  lives: 3,\n  time: 30,\n  win: false,\n  level: 0\n};\n\nexport default initialGame;\n","import initialGame from \"./initial-game\";\nimport constants from \"../constants\";\n\nclass GameModel {\n  constructor(data, player) {\n    this.data = data;\n    this.player = player;\n    this.restart();\n  }\n\n  get state() {\n    return this._state;\n  }\n\n  getLevel(index) {\n    return this.data[index];\n  }\n\n  getCurrentLevel() {\n    return this.getLevel(this._state.level);\n  }\n\n  hasNextLevel() {\n    return this.getLevel(this._state.level + 1) !== void 0;\n  }\n\n  nextLevel() {\n    this._state.level++;\n  }\n\n  die() {\n    this._state.lives--;\n  }\n\n  isDead() {\n    return this._state.lives <= 0;\n  }\n\n  win() {\n    this._state.win = true;\n  }\n\n  tick() {\n    this._state.time--;\n  }\n\n  addAnswer(answer) {\n    this._state.answers.push({correct: answer, time: initialGame.time - this._state.time});\n  }\n\n  restart() {\n    this._state = Object.assign({}, constants.INITIAL_STATE);\n    this._state.answers = [];\n  }\n\n  rebootTime() {\n    this._state.time = initialGame.time;\n  }\n}\n\nexport default GameModel;\n","import AbstractView from \"../views/abstract-view\";\n\nclass SplashScreen extends AbstractView {\n  constructor() {\n    super();\n  }\n\n  get template() {\n    return `\n    <div id=\"main\" class=\"central__content\">\n      <div id=\"intro\" class=\"intro\">\n        <h1 class=\"intro__asterisk load\">*</h1>\n        <p class=\"intro__motto\"><sup>*</sup> Это не фото. Это рисунок маслом нидерландского художника-фотореалиста Tjalf Sparnaay.</p>\n      </div>\n    </div>`;\n  }\n\n  fadeOut() {\n    this.element.classList.add(`fade--out`);\n  }\n}\n\nexport default SplashScreen;\n","import constants from \"./constants\";\n\nconst DEFAULT_NAME = `Неопознанный вомбат`;\nconst APP_ID = 13111983;\n\nconst checkStatus = (response) => {\n  if (response.ok) {\n    return response;\n  } else {\n    throw new Error(`${response.status}: ${response.statusText}`);\n  }\n};\n\nconst toJSON = (response) => response.json();\n\nexport default class Loader {\n  static async loadData() {\n    const response = await fetch(`${constants.SERVER_URL}/questions`);\n    checkStatus(response);\n    return await toJSON(response);\n  }\n\n  static async loadResults(name = DEFAULT_NAME) {\n    const response = await fetch(`${constants.SERVER_URL}/stats/${APP_ID}-${name}`);\n    checkStatus(response);\n    return await toJSON(response);\n  }\n\n  static async saveResults(data, name = DEFAULT_NAME) {\n    const requestSettings = {\n      body: JSON.stringify(data),\n      headers: {\n        'Content-Type': `application/json`\n      },\n      method: `POST`\n    };\n    const response = await fetch(`${constants.SERVER_URL}/stats/${APP_ID}-${name}`, requestSettings);\n    return checkStatus(response);\n  }\n}\n\n","import constants from \"../constants\";\n\nexport const getAnswersQuantity = (state) => {\n  const correctAnswers = state.answers.filter((answer) => {\n    return answer.correct;\n  });\n\n  const slowAnswers = state.answers.filter((answer) => {\n    return answer.time > constants.HIGHER_TIME_LIMIT && answer.correct;\n  });\n\n  const fastAnswers = state.answers.filter((answer) => {\n    return answer.time < constants.LOWER_TIME_LIMIT && answer.correct;\n  });\n\n  return {\n    correct: correctAnswers.length,\n    slow: slowAnswers.length,\n    fast: fastAnswers.length,\n    lives: state.lives\n  };\n};\n\nexport const countPoints = (answers) => {\n  return answers.correct * constants.CORRECT_ANSWER + answers.fast * constants.ADDITIONAL_POINTS + answers.slow * -constants.ADDITIONAL_POINTS + answers.lives * constants.ADDITIONAL_POINTS;\n};\n","import AbstractView from \"./abstract-view\";\nimport StatisticView from \"./statistic-view\";\nimport {countPoints, getAnswersQuantity} from \"../logic/game-statistic\";\nimport constants from \"../constants\";\n\nclass GameResultsView extends AbstractView {\n  constructor(state, index) {\n    super();\n    this.index = index;\n    this.state = state;\n    this.answers = this.state.answers;\n    this.win = this.state.win;\n    this.statsview = new StatisticView(this.answers).template;\n    this.answerResult = getAnswersQuantity(state);\n    this.totalResult = countPoints(this.answerResult);\n  }\n\n  get template() {\n    return `\n          <table class=\"result__table\">\n        <tr>\n          <td class=\"result__number\">${this.index}.</td>\n          <td colspan=\"2\">\n            ${this.statsview}\n          </td>\n          <td class=\"result__points\">×&nbsp;100</td>\n          <td class=\"result__total\">${this.answerResult.correct * constants.CORRECT_ANSWER}</td>\n        </tr>\n        <tr>\n          <td></td>\n          <td class=\"result__extra\">Бонус за скорость:</td>\n          <td class=\"result__extra\">${this.answerResult.fast}&nbsp;<span class=\"stats__result stats__result--fast\"></span></td>\n          <td class=\"result__points\">×&nbsp;50</td>\n          <td class=\"result__total\">${this.answerResult.fast * constants.ADDITIONAL_POINTS}</td>\n        </tr>\n        <tr>\n          <td></td>\n          <td class=\"result__extra\">Бонус за жизни:</td>\n          <td class=\"result__extra\">${this.answerResult.lives}&nbsp;<span class=\"stats__result stats__result--alive\"></span></td>\n          <td class=\"result__points\">×&nbsp;50</td>\n          <td class=\"result__total\">${this.answerResult.lives * constants.ADDITIONAL_POINTS}</td>\n        </tr>\n        <tr>\n          <td></td>\n          <td class=\"result__extra\">Штраф за медлительность:</td>\n          <td class=\"result__extra\">${this.answerResult.slow}&nbsp;<span class=\"stats__result stats__result--slow\"></span></td>\n          <td class=\"result__points\">×&nbsp;50</td>\n          <td class=\"result__total\">${this.answerResult.slow * -constants.ADDITIONAL_POINTS}</td>\n        </tr>\n        <tr>\n          <td colspan=\"5\" class=\"result__total  result__total--final\">${this.totalResult}</td>\n        </tr>\n      </table>`;\n  }\n}\n\nexport default GameResultsView;\n","import AbstractView from \"./abstract-view\";\nimport FooterView from \"./footer-view\";\nimport GameResultsView from \"./game-results-view\";\nimport Application from \"../application\";\nimport constants from \"../constants\";\n\nclass ManyResultsView extends AbstractView {\n  constructor(data) {\n    super();\n    this.data = data.reverse();\n    this.win = this.data[0].win;\n    this.results = [];\n\n    // выодить только три последних результата\n    for (let i = 0; i < Math.min(constants.MAX_RESULTS_NUMBER, this.data.length); i++) {\n      this.results.push(new GameResultsView(this.data[i], i + 1).template);\n    }\n  }\n\n  get template() {\n    return `\n    <header class=\"header\">\n      <div class=\"header__back\">\n        <button class=\"back\">\n          <img src=\"img/arrow_left.svg\" width=\"45\" height=\"45\" alt=\"Back\">\n          <img src=\"img/logo_small.svg\" width=\"101\" height=\"44\">\n        </button>\n      </div>\n    </header>\n    <div class=\"result\">\n      <h1>${this.win === true ? `Победа! 💁‍♂️` : `Поражение! 🤦‍`}</h1>\n      ${this.results}\n    </div>\n    ${new FooterView().template}`;\n  }\n\n  bind() {\n    const backButton = this.element.querySelector(`.back`);\n\n    backButton.onclick = () => {\n      Application.showGreeting();\n    };\n  }\n}\n\nexport default ManyResultsView;\n","import GreetingView from \"./views/greeting-view\";\nimport RulesView from \"./views/rules-view\";\nimport GameScreen from \"./logic/game-screen\";\nimport GameModel from \"./logic/game-model\";\nimport SplashScreen from \"./splash/splash-screen\";\nimport {showErrorMessage} from \"./util\";\nimport Loader from \"./loader\";\nimport ManyResultsView from \"./views/many-results-view\";\nimport constants from \"./constants\";\n\nconst changeScreen = (domElement) => {\n  const screen = document.querySelector(`.central`);\n  screen.innerHTML = ``;\n  screen.appendChild(domElement);\n};\n\nlet gameData;\n\nconst pause = (time) => {\n  return new Promise((resolve) => {\n    setTimeout(() => {\n      resolve();\n    }, time);\n  });\n};\n\nclass Application {\n  static async start() {\n    const splash = new SplashScreen();\n    const greeting = new GreetingView();\n    greeting.hide();\n    greeting.addElement(splash.element);\n    changeScreen(greeting.element);\n    try {\n      gameData = await Loader.loadData();\n      greeting.fadeIn();\n      splash.fadeOut();\n      await pause(constants.PAUSE_TIME);\n      greeting.removeElement(splash.element);\n    } catch (e) {\n      showErrorMessage(e);\n    }\n  }\n\n  static showGreeting() {\n    const greeting = new GreetingView();\n    changeScreen(greeting.element);\n  }\n\n  static showRules() {\n    const rules = new RulesView();\n    changeScreen(rules.element);\n  }\n\n  static showGame(player) {\n    const game = new GameScreen(new GameModel(gameData, player));\n    changeScreen(game.element);\n    game.init();\n  }\n\n  static async showResults(model) {\n    const playerName = model.player;\n    try {\n      await Loader.saveResults(model.state, playerName);\n      const results = new ManyResultsView(await Loader.loadResults(playerName), playerName);\n      changeScreen(results.element);\n    } catch (e) {\n      showErrorMessage(e);\n    }\n  }\n}\n\nexport default Application;\n","import AbstractView from \"./abstract-view\";\nimport constants from \"../constants\";\nimport Application from \"../application\";\nimport FooterView from \"./footer-view\";\n\nclass RulesView extends AbstractView {\n  constructor() {\n    super();\n  }\n\n  get template() {\n    return `\n    <header class=\"header\">\n      <div class=\"header__back\">\n        <button class=\"back\">\n          <img src=\"img/arrow_left.svg\" width=\"45\" height=\"45\" alt=\"Back\">\n          <img src=\"img/logo_small.svg\" width=\"101\" height=\"44\">\n        </button>\n      </div>\n    </header>\n    <div class=\"rules\">\n      <h1 class=\"rules__title\">Правила</h1>\n      <p class=\"rules__description\">Угадай 10 раз для каждого изображения фото <img\n        src=\"img/photo_icon.png\" width=\"16\" height=\"16\"> или рисунок <img\n        src=\"img/paint_icon.png\" width=\"16\" height=\"16\" alt=\"\">.<br>\n        Фотографиями или рисунками могут быть оба изображения.<br>\n        На каждую попытку отводится 30 секунд.<br>\n        Ошибиться можно не более 3 раз.<br>\n        <br>\n        Готовы?\n      </p>\n      <form class=\"rules__form\">\n        <input class=\"rules__input\" type=\"text\" placeholder=\"Ваше Имя\">\n        <button class=\"rules__button  continue\" type=\"submit\" disabled>Go!</button>\n      </form>\n    </div>\n    ${new FooterView().template}`;\n  }\n\n  bind() {\n    const input = this.element.querySelector(`.rules__input`);\n    const button = this.element.querySelector(`.rules__button`);\n    const backButton = this.element.querySelector(`.back`);\n    const form = this.element.querySelector(`.rules__form`);\n    // имя не может состоять < чем из двух символов\n    input.oninput = () => {\n      button.disabled = input.value.length < constants.MIN_NAME_LENGTH;\n    };\n\n    button.addEventListener(`click`, (evt) => {\n      evt.preventDefault();\n      Application.showGame(input.value);\n      form.reset();\n    });\n\n    backButton.addEventListener(`click`, () => {\n      Application.showGreeting();\n    });\n  }\n}\n\nexport default RulesView;\n"],"names":["getElementFromTemplate","markup","domElement","document","createElement","innerHTML","showErrorMessage","message","template","textContent","styles","style","cssText","join","body","appendChild","AbstractView","new","target","Error","_element","render","bind","constants","Object","freeze","FooterView","GreetingView","continueButton","element","querySelector","onclick","showRules","children","opacity","classList","add","insertAdjacentElement","remove","HeaderView","state","addEventListener","onButtonClick","stopFlashing","time","LAST_SEC","Array","INITIAL_STATE","lives","fill","getAnswerType","answer","correct","LOWER_TIME_LIMIT","HIGHER_TIME_LIMIT","StatisticView","answers","answersType","map","answerType","length","GameFirstView","level","question","form","radio","querySelectorAll","checked","item","push","CHECKED_RADIO_COUNT","userAnswer","value","type","onAnswer","reset","image","url","GameSecondView","evt","tagName","GameThirdView","includes","answerUrl","src","ModalView","forEach","elem","contains","onExitClick","onContinueClick","getLevel","game","model","getCurrentLevel","GameScreen","header","_getHeader","content","_getNeededView","statistic","footer","root","_interval","_stopGame","_getModal","modal","showGreeting","lastChild","_startTimer","setInterval","tick","_userAnswer","_updateHeader","gameType","data","_changeLevel","addAnswer","die","isDead","hasNextLevel","win","_endGame","nextLevel","init","showResults","restart","replaceChild","rebootTime","_updateStatistic","_changeContentView","view","initialGame","GameModel","player","index","_state","assign","SplashScreen","DEFAULT_NAME","APP_ID","checkStatus","response","ok","status","statusText","toJSON","json","Loader","fetch","SERVER_URL","name","JSON","stringify","requestSettings","getAnswersQuantity","correctAnswers","filter","slowAnswers","fastAnswers","countPoints","CORRECT_ANSWER","fast","ADDITIONAL_POINTS","slow","GameResultsView","statsview","answerResult","totalResult","ManyResultsView","reverse","results","i","Math","min","MAX_RESULTS_NUMBER","backButton","changeScreen","screen","gameData","pause","Promise","resolve","Application","hide","addElement","splash","greeting","loadData","fadeIn","fadeOut","PAUSE_TIME","removeElement","rules","RulesView","saveResults","playerName","loadResults","input","button","oninput","disabled","MIN_NAME_LENGTH","preventDefault","showGame"],"mappings":";;;AAAO,IAAMA,yBAAyB,SAAzBA,sBAAyB,CAACC,MAAD,EAAY;MAC5CC,aAAaC,SAASC,aAAT,OAAjB;aACWC,SAAX,GAAuBJ,MAAvB;SACOC,UAAP;CAHK;;AAMP,AAAO,IAAMI,mBAAmB,SAAnBA,gBAAmB,CAACC,OAAD,EAAa;MACrCC,WAAWL,SAASC,aAAT,OAAjB;WACSK,WAAT,GAAuBF,OAAvB;;MAEMG,SAAS,yNAAf;;WAcSC,KAAT,CAAeC,OAAf,GAAyBF,OAAOG,IAAP,KAAzB;WACSC,IAAT,CAAcC,WAAd,CAA0BP,QAA1B;CAnBK;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ICJDQ;0BACU;;;QACRC,IAAIC,MAAJ,KAAeF,YAAnB,EAAiC;YACzB,IAAIG,KAAJ,kEAAN;;;;;;6BAiBK;aACAnB,uBAAuB,KAAKQ,QAA5B,CAAP;;;;2BAGK;;;2BAjBQ;YACP,IAAIW,KAAJ,wBAAN;;;;2BAGY;UACR,KAAKC,QAAT,EAAmB;eACV,KAAKA,QAAZ;;WAEGA,QAAL,GAAgB,KAAKC,MAAL,EAAhB;WACKC,IAAL,CAAU,KAAKF,QAAf;aACO,KAAKA,QAAZ;;;;;;ACnBJ,IAAMG,YAAY;qBACG,EADH;qBAEG,CAFH;kBAGA,GAHA;qBAIG,EAJH;oBAKE,EALF;qBAMG,EANH;uBAOK,CAPL;mBAQC,CARD;iBASDC,OAAOC,MAAP,CAAc;WACpB,CADoB;UAErB,EAFqB;SAGtB,KAHsB;WAIpB;GAJM,CATC;oDAAA;sBAgBI,CAhBJ;YAiBN,CAjBM;cAkBJ;CAlBd;;ICEMC;;;wBACU;;;;;;;2BAIC;;;;;EALQV;;ICEnBW;;;0BACU;;;;;;;2BAsBP;UACCC,iBAAiB,KAAKC,OAAL,CAAaC,aAAb,uBAAvB;qBACeC,OAAf,GAAyB,YAAM;oBACjBC,SAAZ;OADF;;;;2BAKK;WACAH,OAAL,CAAaI,QAAb,CAAsB,CAAtB,EAAyBtB,KAAzB,CAA+BuB,OAA/B;;;;6BAGO;WACFL,OAAL,CAAaI,QAAb,CAAsB,CAAtB,EAAyBtB,KAAzB,CAA+BuB,OAA/B;WACKL,OAAL,CAAaI,QAAb,CAAsB,CAAtB,EAAyBE,SAAzB,CAAmCC,GAAnC;;;;+BAGSP,SAAS;WACbA,OAAL,CAAaQ,qBAAb,eAAiDR,OAAjD;WACKA,OAAL,CAAaI,QAAb,CAAsB,CAAtB,EAAyBtB,KAAzB;;;;kCAGYkB,SAAS;cACbS,MAAR;;;;2BAxCa;02DAeX,IAAIZ,UAAJ,GAAiBlB,QAdnB;;;;EANuBQ;;ICDrBuB;;;sBACQC,KAAZ,EAAmB;;;;;UAEZA,KAAL,GAAaA,KAAb;;;;;;2BAyBK;;;WACAX,OAAL,CAAaC,aAAb,UAAoCW,gBAApC,UAA8D,YAAM;eAC7DC,aAAL;eACKC,YAAL;OAFF;;UAKI,KAAKH,KAAL,CAAWI,IAAX,IAAmBrB,UAAUsB,QAAjC,EAA2C;aACpChB,OAAL,CAAaC,aAAb,iBAA2CK,SAA3C,CAAqDC,GAArD;;;;;oCAIY;;;mCAGD;WACRP,OAAL,CAAaC,aAAb,iBAA2CK,SAA3C,CAAqDG,MAArD;;;;2BApCa;qVASe,KAAKE,KAAL,CAAWI,IARvC,0DAUM,IAAIE,KAAJ,CAAUvB,UAAUwB,aAAV,CAAwBC,KAAxB,GAAgC,KAAKR,KAAL,CAAWQ,KAArD,EACHC,IADG,qGAEHpC,IAFG,IAVN,kBAaM,IAAIiC,KAAJ,CAAU,KAAKN,KAAL,CAAWQ,KAArB,EACHC,IADG,oGAEHpC,IAFG,IAbN;;;;EARqBG;;ACAzB,IAAMkC,gBAAgB,SAAhBA,aAAgB,CAACC,MAAD,EAAY;MAC5B,CAACA,OAAOC,OAAZ,EAAqB;;;;MAIjBD,OAAOC,OAAP,IAAkBD,OAAOP,IAAP,GAAcrB,UAAU8B,gBAA9C,EAAgE;;;;MAI5DF,OAAOC,OAAP,IAAkBD,OAAOP,IAAP,GAAcrB,UAAU+B,iBAA9C,EAAiE;;;;;CATnE;;IAgBMC;;;yBACQC,OAAZ,EAAqB;;;;;UAEdA,OAAL,GAAeA,OAAf;UACKC,WAAL,GAAmB,MAAKD,OAAL,CAAaE,GAAb,CAAiB,UAACP,MAAD;aAAYD,cAAcC,MAAd,CAAZ;KAAjB,CAAnB;;;;;;2BAGa;iFAIT,KAAKM,WAAL,CAAiBC,GAAjB,CAAqB,UAACC,UAAD;6DAA2DA,UAA3D;OAArB,EACD9C,IADC,IAHJ,gBAKI,IAAIiC,KAAJ,CAAU,KAAK,KAAKW,WAAL,CAAiBG,MAAhC,EACDX,IADC,6DAEDpC,IAFC,IALJ;;;;EARwBG;;IChBtB6C;;;yBACQC,KAAZ,EAAmB;;;;;UAEZC,QAAL,GAAgBD,MAAMC,QAAtB;UACKP,OAAL,GAAeM,MAAMN,OAArB;;;;;;+BAkCS;;;2BAGJ;;;UACCQ,OAAO,KAAKnC,OAAL,CAAaC,aAAb,kBAAb;UACMmC,QAAQD,KAAKE,gBAAL,gBAAd;;WAEKzB,gBAAL,WAAgC,YAAM;YAC9B0B,UAAU,EAAhB;;;;;;;+BAEmBF,KAAnB,8HAA0B;gBAAfG,IAAe;;;gBAEpBA,KAAKD,OAAT,EAAkB;sBACRE,IAAR,CAAaD,IAAb;;;;;;;;;;;;;;;;;;YAIAD,QAAQP,MAAR,KAAmBrC,UAAU+C,mBAAjC,EAAsD;cAC9CC,aAAaJ,QAAQ,CAAR,EAAWK,KAAX,KAAqB,OAAKhB,OAAL,CAAa,CAAb,EAAgBiB,IAArC,IAA6CN,QAAQ,CAAR,EAAWK,KAAX,KAAqB,OAAKhB,OAAL,CAAa,CAAb,EAAgBiB,IAArG;iBACKC,QAAL,CAAcH,UAAd;eACKI,KAAL;;OAbJ;;;;2BAtCa;4EAGa,KAAKZ,QAF/B,+GAKkB,KAAKP,OAAL,CAAa,CAAb,EAAgBoB,KAAhB,CAAsBC,GALxC,mjBAgBkB,KAAKrB,OAAL,CAAa,CAAb,EAAgBoB,KAAhB,CAAsBC,GAhBxC;;;;EARwB7D;;ICDtB8D;;;0BACQhB,KAAZ,EAAmB;;;;;UAEZC,QAAL,GAAgBD,MAAMC,QAAtB;UACKP,OAAL,GAAeM,MAAMN,OAArB;;;;;;+BAuBS;;;2BAGJ;;;UACCQ,OAAO,KAAKnC,OAAL,CAAaC,aAAb,kBAAb;;WAEKW,gBAAL,WAAgC,UAACsC,GAAD,EAAS;YACjC7D,SAAS6D,IAAI7D,MAAnB;YACIiC,eAAJ;;YAEIjC,OAAO8D,OAAP,YAAJ,EAAgC;mBACrB9D,MAAT;cACMqD,aAAapB,OAAOqB,KAAP,KAAiB,OAAKhB,OAAL,CAAa,CAAb,EAAgBiB,IAApD;iBACKC,QAAL,CAAcH,UAAd;eACKI,KAAL;;OARJ;;;;2BA1Ba;4EAGa,KAAKZ,QAF/B,oIAKkB,KAAKP,OAAL,CAAa,CAAb,EAAgBoB,KAAhB,CAAsBC,GALxC;;;;EARyB7D;;ICAvBiE;;;yBACQnB,KAAZ,EAAmB;;;;;UAEZC,QAAL,GAAgBD,MAAMC,QAAtB;UACKP,OAAL,GAAeM,MAAMN,OAArB;;;;;;+BAqBS;;;2BAGJ;;;UACCQ,OAAO,KAAKnC,OAAL,CAAaC,aAAb,kBAAb;UACMqB,SAAS,KAAKY,QAAL,CAAcmB,QAAd,mDAAf;UACIC,cAAJ;;;;;;;6BAEiB,KAAK3B,OAAtB,8HAA+B;cAAtBY,IAAsB;;cACzBA,KAAKK,IAAL,KAActB,MAAlB,EAA0B;wBACZiB,KAAKQ,KAAL,CAAWC,GAAvB;;;;;;;;;;;;;;;;;;;WAKCpC,gBAAL,UAA+B,UAACsC,GAAD,EAAS;YAClC7D,SAAS6D,IAAI7D,MAAjB;YACMqD,aAAarD,OAAOe,QAAP,CAAgB,CAAhB,EAAmBmD,GAAnB,KAA2BD,SAA9C;eACKT,QAAL,CAAcH,UAAd;OAHF;;;;2BAjCa;4EAGa,KAAKR,QAF/B,4JAKsC,KAAKP,OAAL,CAAa,CAAb,EAAgBoB,KAAhB,CAAsBC,GAL5D,oLAQsC,KAAKrB,OAAL,CAAa,CAAb,EAAgBoB,KAAhB,CAAsBC,GAR5D,4JAWsC,KAAKrB,OAAL,CAAa,CAAb,EAAgBoB,KAAhB,CAAsBC,GAX5D;;;;EARwB7D;;ICAtBqE;;;uBACU;;;;;;;2BAeP;;;WACAxD,OAAL,CAAaqC,gBAAb,mBAAgDoB,OAAhD,CAAwD,UAACC,IAAD,EAAU;aAC3D9C,gBAAL,UAA+B,YAAM;cAC/B8C,KAAKpD,SAAL,CAAeqD,QAAf,cAAJ,EAA2C;mBACpCC,WAAL;WADF,MAEO;mBACAC,eAAL;;SAJJ;OADF;;WAUK7D,OAAL,CAAalB,KAAb;;;;kCAGY;;;sCAGI;;;2BA5BH;;;;;EALOK;;ACOxB,IAAM2E,WAAW,SAAXA,QAAW,CAACC,IAAD,EAAOC,KAAP,EAAiB;MAC5BD,qBAAJ,EAA2B;WAClB,IAAI/B,aAAJ,CAAkBgC,MAAMC,eAAN,EAAlB,CAAP;;MAEEF,sBAAJ,EAA4B;WACnB,IAAId,cAAJ,CAAmBe,MAAMC,eAAN,EAAnB,CAAP;;SAEK,IAAIb,aAAJ,CAAkBY,MAAMC,eAAN,EAAlB,CAAP;CAPF;;IAUMC;sBACQF,KAAZ,EAAmB;;;SACZA,KAAL,GAAaA,KAAb;SACKG,MAAL,GAAc,KAAKC,UAAL,EAAd;SACKC,OAAL,GAAe,KAAKC,cAAL,EAAf;SACKC,SAAL,GAAiB,IAAI7C,aAAJ,CAAkB,KAAKsC,KAAL,CAAWrD,KAAX,CAAiBgB,OAAnC,CAAjB;SACK6C,MAAL,GAAc,IAAI3E,UAAJ,EAAd;;SAEK4E,IAAL,GAAYnG,SAASC,aAAT,OAAZ;SACKkG,IAAL,CAAUvF,WAAV,CAAsB,KAAKiF,MAAL,CAAYnE,OAAlC;SACKyE,IAAL,CAAUvF,WAAV,CAAsB,KAAKmF,OAAL,CAAarE,OAAnC;SACKyE,IAAL,CAAUvF,WAAV,CAAsB,KAAKqF,SAAL,CAAevE,OAArC;SACKyE,IAAL,CAAUvF,WAAV,CAAsB,KAAKsF,MAAL,CAAYxE,OAAlC;;SAEK0E,SAAL,GAAiB,IAAjB;;;;;iCAOW;;;UACLP,SAAS,IAAIzD,UAAJ,CAAe,KAAKsD,KAAL,CAAWrD,KAA1B,CAAf;aACOE,aAAP,GAAuB,YAAM;cACtB8D,SAAL;cACKF,IAAL,CAAUvF,WAAV,CAAsB,MAAK0F,SAAL,GAAiB5E,OAAvC;OAFF;;aAKOmE,MAAP;;;;gCAGU;;;UACJU,QAAQ,IAAIrB,SAAJ,EAAd;YACMI,WAAN,GAAoB,YAAM;oBACZkB,YAAZ;OADF;YAGMjB,eAAN,GAAwB,YAAM;eACvBY,IAAL,CAAUM,SAAV,CAAoBtE,MAApB;eACKuE,WAAL;OAFF;aAIOH,KAAP;;;;gCAGU;oBACI,KAAKH,SAAnB;;;;kCAGY;;;WACPA,SAAL,GAAiBO,YAAY,YAAM;eAC5BjB,KAAL,CAAWkB,IAAX;YACI,OAAKlB,KAAL,CAAWrD,KAAX,CAAiBI,IAAjB,IAAyB,CAA7B,EAAgC;iBACzB4D,SAAL;iBACKQ,WAAL,CAAiB,KAAjB;;eAEGC,aAAL;OANe,EAOd,IAPc,CAAjB;;;;qCAUe;UACTC,WAAW,KAAKrB,KAAL,CAAWsB,IAAX,CAAgB,KAAKtB,KAAL,CAAWrD,KAAX,CAAiBsB,KAAjC,EAAwCW,IAAzD;aACOkB,SAASuB,QAAT,EAAmB,KAAKrB,KAAxB,CAAP;;;;2BAGK;WACAuB,YAAL;WACKP,WAAL;;;;gCAGU1D,QAAQ;WACbqD,SAAL;WACKX,KAAL,CAAWwB,SAAX,CAAqBlE,MAArB;;UAEI,CAACA,MAAL,EAAa;aACN0C,KAAL,CAAWyB,GAAX;;;UAGE,KAAKzB,KAAL,CAAW0B,MAAX,MAAuB,CAAC,KAAK1B,KAAL,CAAW2B,YAAX,EAA5B,EAAuD;YACjD,CAAC,KAAK3B,KAAL,CAAW0B,MAAX,EAAL,EAA0B;eACnB1B,KAAL,CAAW4B,GAAX;;aAEGC,QAAL;OAJF,MAKO;aACA7B,KAAL,CAAW8B,SAAX;aACKC,IAAL;;;;;+BAIO;kBACGC,WAAZ,CAAwB,KAAKhC,KAA7B;WACKA,KAAL,CAAWiC,OAAX;;;;oCAGc;UACR9B,SAAS,KAAKC,UAAL,EAAf;WACKK,IAAL,CAAUyB,YAAV,CAAuB/B,OAAOnE,OAA9B,EAAuC,KAAKmE,MAAL,CAAYnE,OAAnD;WACKmE,MAAL,GAAcA,MAAd;;;;uCAGiB;UACXI,YAAY,IAAI7C,aAAJ,CAAkB,KAAKsC,KAAL,CAAWrD,KAAX,CAAiBgB,OAAnC,CAAlB;WACK8C,IAAL,CAAUyB,YAAV,CAAuB3B,UAAUvE,OAAjC,EAA0C,KAAKuE,SAAL,CAAevE,OAAzD;WACKuE,SAAL,GAAiBA,SAAjB;;;;mCAGa;WACRP,KAAL,CAAWmC,UAAX;WACKf,aAAL;WACKgB,gBAAL;;UAEMf,WAAW,KAAKrB,KAAL,CAAWC,eAAX,GAA6BrB,IAA9C;UACMX,QAAQ6B,SAASuB,QAAT,EAAmB,KAAKrB,KAAxB,CAAd;YACMnB,QAAN,GAAiB,KAAKsC,WAAL,CAAiB1F,IAAjB,CAAsB,IAAtB,CAAjB;WACK4G,kBAAL,CAAwBpE,KAAxB;;;;uCAGiBqE,MAAM;WAClB7B,IAAL,CAAUyB,YAAV,CAAuBI,KAAKtG,OAA5B,EAAqC,KAAKqE,OAAL,CAAarE,OAAlD;WACKqE,OAAL,GAAeiC,IAAf;;;;2BApGY;aACL,KAAK7B,IAAZ;;;;;;ACrCJ,IAAM8B,cAAc;SACX,CADW;QAEZ,EAFY;OAGb,KAHa;SAIX;CAJT;;ICGMC;qBACQlB,IAAZ,EAAkBmB,MAAlB,EAA0B;;;SACnBnB,IAAL,GAAYA,IAAZ;SACKmB,MAAL,GAAcA,MAAd;SACKR,OAAL;;;;;6BAOOS,OAAO;aACP,KAAKpB,IAAL,CAAUoB,KAAV,CAAP;;;;sCAGgB;aACT,KAAK5C,QAAL,CAAc,KAAK6C,MAAL,CAAY1E,KAA1B,CAAP;;;;mCAGa;aACN,KAAK6B,QAAL,CAAc,KAAK6C,MAAL,CAAY1E,KAAZ,GAAoB,CAAlC,MAAyC,KAAK,CAArD;;;;gCAGU;WACL0E,MAAL,CAAY1E,KAAZ;;;;0BAGI;WACC0E,MAAL,CAAYxF,KAAZ;;;;6BAGO;aACA,KAAKwF,MAAL,CAAYxF,KAAZ,IAAqB,CAA5B;;;;0BAGI;WACCwF,MAAL,CAAYf,GAAZ,GAAkB,IAAlB;;;;2BAGK;WACAe,MAAL,CAAY5F,IAAZ;;;;8BAGQO,QAAQ;WACXqF,MAAL,CAAYhF,OAAZ,CAAoBa,IAApB,CAAyB,EAACjB,SAASD,MAAV,EAAkBP,MAAMwF,YAAYxF,IAAZ,GAAmB,KAAK4F,MAAL,CAAY5F,IAAvD,EAAzB;;;;8BAGQ;WACH4F,MAAL,GAAchH,OAAOiH,MAAP,CAAc,EAAd,EAAkBlH,UAAUwB,aAA5B,CAAd;WACKyF,MAAL,CAAYhF,OAAZ,GAAsB,EAAtB;;;;iCAGW;WACNgF,MAAL,CAAY5F,IAAZ,GAAmBwF,YAAYxF,IAA/B;;;;2BA9CU;aACH,KAAK4F,MAAZ;;;;;;ICTEE;;;0BACU;;;;;;;8BAcJ;WACH7G,OAAL,CAAaM,SAAb,CAAuBC,GAAvB;;;;2BAXa;;;;;EALUpB;;ACA3B,IAAM2H,8HAAN;AACA,IAAMC,SAAS,QAAf;;AAEA,IAAMC,cAAc,SAAdA,WAAc,CAACC,QAAD,EAAc;MAC5BA,SAASC,EAAb,EAAiB;WACRD,QAAP;GADF,MAEO;UACC,IAAI3H,KAAJ,CAAa2H,SAASE,MAAtB,UAAiCF,SAASG,UAA1C,CAAN;;CAJJ;;AAQA,IAAMC,SAAS,SAATA,MAAS,CAACJ,QAAD;SAAcA,SAASK,IAAT,EAAd;CAAf;;IAEqBC;;;;;;;;;;;;;;;uBAEMC,MAAS9H,UAAU+H,UAAnB;;;;;4BACXR,QAAZ;;uBACaI,OAAOJ,QAAP;;;;;;;;;;;;;;;;;;;;;;;YAGUS,2EAAOZ;;;;;;;uBACPU,MAAS9H,UAAU+H,UAAnB,eAAuCV,MAAvC,SAAiDW,IAAjD;;;;;4BACXT,QAAZ;;uBACaI,OAAOJ,QAAP;;;;;;;;;;;;;;;;;;;;;;2FAGU3B;YAAMoC,2EAAOZ;;;;;;kCACZ;wBAChBa,KAAKC,SAAL,CAAetC,IAAf,CADgB;2BAEb;;mBAFa;;;;uBAODkC,MAAS9H,UAAU+H,UAAnB,eAAuCV,MAAvC,SAAiDW,IAAjD,EAAyDG,eAAzD;;;;kDAChBb,YAAYC,QAAZ;;;;;;;;;;;;;;;;;;;;ACnCJ,IAAMa,qBAAqB,SAArBA,kBAAqB,CAACnH,KAAD,EAAW;MACrCoH,iBAAiBpH,MAAMgB,OAAN,CAAcqG,MAAd,CAAqB,UAAC1G,MAAD,EAAY;WAC/CA,OAAOC,OAAd;GADqB,CAAvB;;MAIM0G,cAActH,MAAMgB,OAAN,CAAcqG,MAAd,CAAqB,UAAC1G,MAAD,EAAY;WAC5CA,OAAOP,IAAP,GAAcrB,UAAU+B,iBAAxB,IAA6CH,OAAOC,OAA3D;GADkB,CAApB;;MAIM2G,cAAcvH,MAAMgB,OAAN,CAAcqG,MAAd,CAAqB,UAAC1G,MAAD,EAAY;WAC5CA,OAAOP,IAAP,GAAcrB,UAAU8B,gBAAxB,IAA4CF,OAAOC,OAA1D;GADkB,CAApB;;SAIO;aACIwG,eAAehG,MADnB;UAECkG,YAAYlG,MAFb;UAGCmG,YAAYnG,MAHb;WAIEpB,MAAMQ;GAJf;CAbK;;AAqBP,AAAO,IAAMgH,cAAc,SAAdA,WAAc,CAACxG,OAAD,EAAa;SAC/BA,QAAQJ,OAAR,GAAkB7B,UAAU0I,cAA5B,GAA6CzG,QAAQ0G,IAAR,GAAe3I,UAAU4I,iBAAtE,GAA0F3G,QAAQ4G,IAAR,GAAe,CAAC7I,UAAU4I,iBAApH,GAAwI3G,QAAQR,KAAR,GAAgBzB,UAAU4I,iBAAzK;CADK;;IClBDE;;;2BACQ7H,KAAZ,EAAmB+F,KAAnB,EAA0B;;;;;UAEnBA,KAAL,GAAaA,KAAb;UACK/F,KAAL,GAAaA,KAAb;UACKgB,OAAL,GAAe,MAAKhB,KAAL,CAAWgB,OAA1B;UACKiE,GAAL,GAAW,MAAKjF,KAAL,CAAWiF,GAAtB;UACK6C,SAAL,GAAiB,IAAI/G,aAAJ,CAAkB,MAAKC,OAAvB,EAAgChD,QAAjD;UACK+J,YAAL,GAAoBZ,mBAAmBnH,KAAnB,CAApB;UACKgI,WAAL,GAAmBR,YAAY,MAAKO,YAAjB,CAAnB;;;;;;2BAGa;oHAIsB,KAAKhC,KAHxC,0DAKU,KAAK+B,SALf,4HAQkC,KAAKC,YAAL,CAAkBnH,OAAlB,GAA4B7B,UAAU0I,cARxE,iPAakC,KAAKM,YAAL,CAAkBL,IAbpD,8KAekC,KAAKK,YAAL,CAAkBL,IAAlB,GAAyB3I,UAAU4I,iBAfrE,+NAoBkC,KAAKI,YAAL,CAAkBvH,KApBpD,+KAsBkC,KAAKuH,YAAL,CAAkBvH,KAAlB,GAA0BzB,UAAU4I,iBAtBtE,qRA2BkC,KAAKI,YAAL,CAAkBH,IA3BpD,8KA6BkC,KAAKG,YAAL,CAAkBH,IAAlB,GAAyB,CAAC7I,UAAU4I,iBA7BtE,sHAgCoE,KAAKK,WAhCzE;;;;EAb0BxJ;;ICCxByJ;;;2BACQtD,IAAZ,EAAkB;;;;;UAEXA,IAAL,GAAYA,KAAKuD,OAAL,EAAZ;UACKjD,GAAL,GAAW,MAAKN,IAAL,CAAU,CAAV,EAAaM,GAAxB;UACKkD,OAAL,GAAe,EAAf;;;SAGK,IAAIC,IAAI,CAAb,EAAgBA,IAAIC,KAAKC,GAAL,CAASvJ,UAAUwJ,kBAAnB,EAAuC,MAAK5D,IAAL,CAAUvD,MAAjD,CAApB,EAA8EgH,GAA9E,EAAmF;YAC5ED,OAAL,CAAatG,IAAb,CAAkB,IAAIgG,eAAJ,CAAoB,MAAKlD,IAAL,CAAUyD,CAAV,CAApB,EAAkCA,IAAI,CAAtC,EAAyCpK,QAA3D;;;;;;;2BAqBG;UACCwK,aAAa,KAAKnJ,OAAL,CAAaC,aAAb,SAAnB;;iBAEWC,OAAX,GAAqB,YAAM;oBACb4E,YAAZ;OADF;;;;2BApBa;2WAWL,KAAKc,GAAL,KAAa,IAAb,wJAVR,sBAWI,KAAKkD,OAXT,0BAaE,IAAIjJ,UAAJ,GAAiBlB,QAbnB;;;;EAd0BQ;;ACI9B,IAAMiK,eAAe,SAAfA,YAAe,CAAC/K,UAAD,EAAgB;MAC7BgL,SAAS/K,SAAS2B,aAAT,YAAf;SACOzB,SAAP;SACOU,WAAP,CAAmBb,UAAnB;CAHF;;AAMA,IAAIiL,iBAAJ;;AAEA,IAAMC,QAAQ,SAARA,KAAQ,CAACxI,IAAD,EAAU;SACf,IAAIyI,OAAJ,CAAY,UAACC,OAAD,EAAa;eACnB,YAAM;;KAAjB,EAEG1I,IAFH;GADK,CAAP;CADF;;IAQM2I;;;;;;;;;;;;;;yBAEa,IAAI7C,YAAJ;2BACE,IAAI/G,YAAJ;;yBACR6J,IAAT;yBACSC,UAAT,CAAoBC,OAAO7J,OAA3B;6BACa8J,SAAS9J,OAAtB;;;uBAEmBuH,OAAOwC,QAAP;;;;;yBACRC,MAAT;uBACOC,OAAP;;uBACMV,MAAM7J,UAAUwK,UAAhB;;;yBACGC,aAAT,CAAuBN,OAAO7J,OAA9B;;;;;;;;;;;;;;;;;;;;;;;;;;mCAMkB;UACd8J,WAAW,IAAIhK,YAAJ,EAAjB;mBACagK,SAAS9J,OAAtB;;;;gCAGiB;UACXoK,QAAQ,IAAIC,SAAJ,EAAd;mBACaD,MAAMpK,OAAnB;;;;6BAGcyG,QAAQ;UAChB1C,OAAO,IAAIG,UAAJ,CAAe,IAAIsC,SAAJ,CAAc8C,QAAd,EAAwB7C,MAAxB,CAAf,CAAb;mBACa1C,KAAK/D,OAAlB;WACK+F,IAAL;;;;;2FAGuB/B;;;;;;6BACJA,MAAMyC;;;uBAEjBc,OAAO+C,WAAP,CAAmBtG,MAAMrD,KAAzB,EAAgC4J,UAAhC;;;+BACc3B;;uBAAsBrB,OAAOiD,WAAP,CAAmBD,UAAnB;;;;+BAAgCA;;;6BAC7DzB,QAAQ9I,OAArB;;;;;;;;;;;;;;;;;;;;;;;;;;;;IC5DAqK;;;uBACU;;;;;;;2BAiCP;UACCI,QAAQ,KAAKzK,OAAL,CAAaC,aAAb,iBAAd;UACMyK,SAAS,KAAK1K,OAAL,CAAaC,aAAb,kBAAf;UACMkJ,aAAa,KAAKnJ,OAAL,CAAaC,aAAb,SAAnB;UACMkC,OAAO,KAAKnC,OAAL,CAAaC,aAAb,gBAAb;;YAEM0K,OAAN,GAAgB,YAAM;eACbC,QAAP,GAAkBH,MAAM9H,KAAN,CAAYZ,MAAZ,GAAqBrC,UAAUmL,eAAjD;OADF;;aAIOjK,gBAAP,UAAiC,UAACsC,GAAD,EAAS;YACpC4H,cAAJ;oBACYC,QAAZ,CAAqBN,MAAM9H,KAA3B;aACKG,KAAL;OAHF;;iBAMWlC,gBAAX,UAAqC,YAAM;oBAC7BkE,YAAZ;OADF;;;;2BA7Ca;w3DA0BX,IAAIjF,UAAJ,GAAiBlB,QAzBnB;;;;EANoBQ;;;;;;;;"}